<!doctype html>
<html lang="zh">

<head>
  <meta charset="utf-8" />
  <title>ES2018 è°œé¢˜ | JavaScript ç•Œçš„å…«çº§è€ƒè¯•</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
  <meta name="renderer" content="webkit" />
  <meta name="force-rendering" content="webkit" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="57x57" href="/assets/icon/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/assets/icon/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/assets/icon/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/assets/icon/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/assets/icon/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/assets/icon/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/assets/icon/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/assets/icon/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icon/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/assets/icon/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/assets/icon/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/icon/favicon-16x16.png">
  <link rel="manifest" href="/assets/manifest.json">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="/assets/icon/ms-icon-144x144.png">
  <meta name="theme-color" content="#2f83cd">
  <link type="text/css" rel="stylesheet" href="assets/style.css" />

  <script>
    var _hmt = _hmt || [];
    (function () {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?41425a6b390a1f56a7d729cd50360d37";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>

</head>

<body>

  <div class="wechat-share" style="display:none;">
    <img src="/assets/icon/logo.svg" />
  </div>

  <div class="page-title">
    <h1>ES2018(ES9) Puzzlers</h1>
    <p>
      ES2018(ES9) é©¬ä¸Šå‘å¸ƒï¼Œæ–°ç‰¹æ€§åŒ…æ‹¬ï¼šå¼‚æ­¥è¿­ä»£å™¨ã€å¯¹è±¡å±•å¼€è¿ç®—ç¬¦ã€Promise.prototype.finallyã€éè½¬ä¹‰åºåˆ—çš„æ¨¡æ¿å­—ç¬¦ä¸²ã€æ­£åˆ™è¡¨è¾¾å¼ s/dotAll æ¨¡å¼ã€ç­‰ç­‰...
    </p>
    <p>æœ¬ç½‘ç«™ä¸»è¦ç”¨äºæµ‹è¯•ä½ å¯¹ ES2018(ES9) çš„æŒæ¡æƒ…å†µï¼Œç­”æ¡ˆå¯åœ¨
      <a href="http://esnext.justjavac.com" target="_blank">esnext.justjavac.com</a> æ‰¾åˆ°ï¼Œå‰ç«¯äº¤æµ QQ ç¾¤ï¼š
      <a href="https://jq.qq.com/?_wv=1027&k=5RDuiJf" target="_blank">599243863</a>
    </p>
  </div>
  <div class="score">
    <span class="numbers">
      (
      <span class="right">0</span>
      /
      <span class="wrong">0</span>
      )
      <span class="total">N/A</span>
    </span>
  </div>

  <div class="container">
    <ol>
      <li>
        <h2>ä»¥ä¸‹ä»£ç çš„æ‰§è¡Œç»“æœï¼Ÿ</h2>
        <pre>let { x, y, ...z } = { x: 1, y: 2, a: 3, b: 4 };
console.log(z);</pre>
        <div class="btn-group">
          <button class="btn btn-outline" type="button">3</button>
          <button class="btn btn-outline" type="button">4</button>
          <button class="btn btn-outline ok" type="button">{ a: 3, b: 4 }</button>
          <button class="btn btn-outline" type="button">[object Object]</button>
        </div>
        <div class="answer">
          é€åˆ†é¢˜ï¼Œä¸è§£é‡Š
        </div>
      </li>

      <li>
        <h2>ä»¥ä¸‹ä»£ç çš„æ‰§è¡Œç»“æœï¼Ÿ</h2>
        <pre>let { ...obj } = Object.create({ x: 1 });
console.log(obj.x);</pre>
        <div class="btn-group">
          <button class="btn btn-outline" type="button">1</button>
          <button class="btn btn-outline ok" type="button">undefined</button>
          <button class="btn btn-outline" type="button">{ x: 1 }</button>
          <button class="btn btn-outline" type="button">null</button>
        </div>
        <div class="answer">
          å¯¹è±¡çš„å‰©ä½™å±æ€§èµ‹å€¼æ—¶ï¼Œåªèµ‹å€¼è‡ªå·±çš„å±æ€§ï¼Œä¸èµ‹å€¼åŸå‹é“¾ä¸Šçš„å±æ€§ã€‚
        </div>
      </li>

      <li>
        <h2>ä»¥ä¸‹ä¸¤æ®µä»£ç åœ¨åŠŸèƒ½ä¸Šæ˜¯å¦ç›¸ç­‰ï¼Ÿ</h2>
        <pre>function fn1(obj) {
  let { x, y, ...z } = obj;
  return { x, y, z };
}

function fn2(obj) {
  let { x, ...n } = obj;
  let { y, ...z } = n;
  return { x, y, z };
}</pre>
        <div class="btn-group">
          <button class="btn btn-outline" type="button">åŠŸèƒ½ç›¸åŒ</button>
          <button class="btn btn-outline ok" type="button">ä¸ç›¸åŒ</button>
          <button class="btn btn-outline" type="button">ä¸çŸ¥é“</button>
        </div>
        <div class="answer">
          åŒä¸Šã€‚
        </div>
      </li>

      <li>
        <h2>ä»¥ä¸‹ä»£ç çš„æ‰§è¡Œç»“æœï¼Ÿ</h2>
        <pre>let { x, y, ...z } = null;
console.log(z);</pre>
        <div class="btn-group">
          <button class="btn btn-outline" type="button">ReferenceError</button>
          <button class="btn btn-outline" type="button">null</button>
          <button class="btn btn-outline ok" type="button">TypeError</button>
          <button class="btn btn-outline" type="button">SyntaxError</button>
        </div>
        <div class="answer">
          <code>TypeError: Cannot destructure property `x` of 'undefined' or 'null'.</code> è¿è¡Œæ—¶é”™è¯¯ã€‚
        </div>
      </li>

      <li>
        <h2>ä»¥ä¸‹ä»£ç çš„æ‰§è¡Œç»“æœï¼Ÿ</h2>
        <pre>let obj = { x: 1, y: 2, a: 3, b: 4 };
let { ...x, y, z } = obj;
console.log(x);</pre>
        <div class="btn-group">
          <button class="btn btn-outline" type="button">ReferenceError</button>
          <button class="btn btn-outline" type="button">null</button>
          <button class="btn btn-outline" type="button">TypeError</button>
          <button class="btn btn-outline ok" type="button">SyntaxError</button>
        </div>
        <div class="answer">
          <code>SyntaxError: Rest element must be last element</code>
        </div>
      </li>

      <li>
        <h2>ä»¥ä¸‹ä»£ç ä¼šæŠ›å‡ºå¼‚å¸¸å—ï¼Ÿ</h2>
        <pre>let obj = { x: 1, y: 2, a: 3, b: 4 };
let objWithXGetter = { ...obj, get x() { throw new Error() } };</pre>
        <div class="btn-group">
          <button class="btn btn-outline" type="button">æŠ›å‡ºå¼‚å¸¸</button>
          <button class="btn btn-outline ok" type="button">æ²¡æœ‰å¼‚å¸¸</button>
        </div>
        <div class="answer">
          ä¸Šé¢ä»£ç ç­‰ä»·äºï¼š
          <pre>let objWithXGetter = {};

Object.assign(objWithXGetter, a);

Object.defineProperty(objWithXGetter, "x", {
  get(){ throw new Error() },
  enumerable : true,
  configurable : true
});</pre> ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚
        </div>
      </li>

      <li>
        <h2>ä»¥ä¸‹ä»£ç ä¼šæŠ›å‡ºå¼‚å¸¸å—ï¼Ÿ</h2>
        <pre>let obj = { x: 1, y: 2, a: 3, b: 4 };
let objWithXGetter = { 
  ...obj, 
  ...{ get x() { throw new Error() } } 
};</pre>
        <div class="btn-group">
          <button class="btn btn-outline ok" type="button">æŠ›å‡ºå¼‚å¸¸</button>
          <button class="btn btn-outline" type="button">æ²¡æœ‰å¼‚å¸¸</button>
        </div>
        <div class="answer">
          <code>.x</code> è¢«è°ƒç”¨äº†ï¼Œæ‰€ä»¥æŠ›å‡ºäº†å¼‚å¸¸
        </div>
      </li>

      <li>
        <h2>ä»¥ä¸‹ä»£ç çš„æ‰§è¡Œç»“æœï¼Ÿ</h2>
        <pre>let emptyObject = { ...null, ...undefined };
let emptyArray = [...null, ...undefined];</pre>
        <div class="btn-group">
          <button class="btn btn-outline" type="button">{}, []</button>
          <button class="btn btn-outline" type="button">error, error</button>
          <button class="btn btn-outline" type="button">error, []</button>
          <button class="btn btn-outline ok" type="button">{}, error</button>
        </div>
        <div class="answer">
          å¯¹è±¡ä¼šå¿½ç•¥
          <code>null</code> å’Œ
          <code>undefined</code>ï¼Œæ•°ç»„ä¼šæŠ›å¼‚å¸¸ WTF
        </div>
      </li>

      <li>
        <h2>ä»¥ä¸‹ä»£ç çš„æ‰§è¡Œç»“æœï¼Ÿ</h2>
        <pre>let x = { a: 1, b: 2 };
let y = [ ...x ];</pre>
        <div class="btn-group">
          <button class="btn btn-outline" type="button">[]</button>
          <button class="btn btn-outline ok" type="button">error</button>
          <button class="btn btn-outline" type="button">[{ a: 1 }, { b: 2 }]</button>
          <button class="btn btn-outline" type="button">[ 1, 2 ]</button>
        </div>
        <div class="answer">
          <code>TypeError: x is not iterable</code>
        </div>
      </li>

      <li>
        <h2>ä»¥ä¸‹ä»£ç çš„æ‰§è¡Œç»“æœï¼Ÿ</h2>
        <pre>let x = { a: 1, b: 2, length: 2 };
let y = [ ...x ];</pre>
        <div class="btn-group">
          <button class="btn btn-outline" type="button">[]</button>
          <button class="btn btn-outline ok" type="button">error</button>
          <button class="btn btn-outline" type="button">[{ a: 1 }, { b: 2 }]</button>
          <button class="btn btn-outline" type="button">[ 1, 2 ]</button>
        </div>
        <div class="answer">
          <!-- https://github.com/tc39/proposal-object-rest-spread/issues/11 -->
          <code>TypeError: x is not iterable</code>
        </div>
      </li>

      <li>
        <h2>ä»¥ä¸‹ä»£ç çš„æ‰§è¡Œç»“æœï¼Ÿ</h2>
        <pre>let x = [ 1, 2 ];
let { ...y } = x;
console.log(y);</pre>
        <div class="btn-group">
          <button class="btn btn-outline" type="button">undefined</button>
          <button class="btn btn-outline" type="button">error</button>
          <button class="btn btn-outline" type="button">null</button>
          <button class="btn btn-outline ok" type="button">{ 0: 1, 1: 2 }</button>
        </div>
        <div class="answer">
          <code>x</code> è¢«è½¬æ¢æˆå¯¹è±¡ã€‚
        </div>
      </li>

      <li>
        <h2>ä»¥ä¸‹ä»£ç çš„æ‰§è¡Œç»“æœï¼Ÿ</h2>
        <pre>let x = { a: 1 };
let o = { 
  __proto__: null, 
  b: 2,
  ...x
};
console.log(o);</pre>
        <div class="btn-group">
          <button class="btn btn-outline" type="button">null</button>
          <button class="btn btn-outline" type="button">error</button>
          <button class="btn btn-outline ok" type="button">{ a: 1, b: 2 }</button>
          <button class="btn btn-outline" type="button">{ __proto__: null, a: 1, b: 2 }</button>
        </div>
        <div class="answer">
          <!-- https://github.com/tc39/proposal-object-rest-spread/issues/7 -->
          è¿™é“é¢˜çš„è€ƒç‚¹ä¸ ES2018 çš„å¯¹è±¡æ‰©å±•è¿ç®—ç¬¦æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚
          <code>let o = { __proto__: null }</code> å’Œ
          <code>let o = Object.create(null)</code> ä¸€æ ·ï¼Œéƒ½æ˜¯åˆ›å»ºä¸€ä¸ªçœŸæ­£çš„ç©ºå¯¹è±¡ï¼Œæ¯”
          <code>let o = {}</code>ï¼Œå› ä¸ºè¿™ä¸ªå¯¹è±¡æ²¡æœ‰åŸå‹é“¾ã€‚
        </div>
      </li>

      <li>
        <h2>ä»¥ä¸‹ä»£ç çš„æ‰§è¡Œç»“æœï¼Ÿ</h2>
        <pre>let x = `\u{55}`;
x.length;></pre>
        <div class="btn-group">
          <button class="btn btn-outline" type="button">0</button>
          <button class="btn btn-outline ok" type="button">1</button>
          <button class="btn btn-outline" type="button">6</button>
          <button class="btn btn-outline" type="button">error</button>
        </div>
        <div class="answer">
          <code>\u</code>å¼€å§‹çš„ä¸º unicode è½¬ä¹‰å­—ç¬¦ã€‚
        </div>
      </li>

      <li>
        <h2>ä»¥ä¸‹ä»£ç çš„æ‰§è¡Œç»“æœï¼Ÿ</h2>
        <pre>let x = `\unicode`;
x.length;</pre>
        <div class="btn-group">
          <button class="btn btn-outline" type="button">0</button>
          <button class="btn btn-outline" type="button">1</button>
          <button class="btn btn-outline" type="button">8</button>
          <button class="btn btn-outline ok" type="button">error</button>
        </div>
        <div class="answer">
          <code>SyntaxError: Invalid Unicode escape sequence</code> éæ³•çš„ Unicode è½¬ä¹‰åºåˆ—ã€‚
        </div>
      </li>

      <li>
        <h2>ä»¥ä¸‹ä»£ç çš„æ‰§è¡Œç»“æœï¼Ÿ</h2>
        <pre>let x = String.raw`\u{55}`;
x.length;</pre>
        <div class="btn-group">
          <button class="btn btn-outline" type="button">0</button>
          <button class="btn btn-outline" type="button">1</button>
          <button class="btn btn-outline ok" type="button">6</button>
          <button class="btn btn-outline" type="button">error</button>
        </div>
        <div class="answer">
          <code>String.raw</code> è¿”å›å­—ç¬¦ä¸²çš„åŸå§‹è¡¨ç¤º
        </div>
      </li>

      <li>
        <h2>ä»¥ä¸‹ä»£ç çš„æ‰§è¡Œç»“æœï¼Ÿ</h2>
        <pre>let x = `\unicode`;
x.length;</pre>
        <div class="btn-group">
          <button class="btn btn-outline" type="button">0</button>
          <button class="btn btn-outline" type="button">1</button>
          <button class="btn btn-outline" type="button">8</button>
          <button class="btn btn-outline ok" type="button">error</button>
        </div>
        <div class="answer">
          <code>SyntaxError: Invalid Unicode escape sequence</code>
        </div>
      </li>

      <li>
        <h2>ä»¥ä¸‹ä»£ç çš„æ‰§è¡Œç»“æœï¼Ÿ</h2>
        <pre>let x = String.raw`\unicode`;
x.length;</pre>
        <div class="btn-group">
          <button class="btn btn-outline" type="button">0</button>
          <button class="btn btn-outline" type="button">1</button>
          <button class="btn btn-outline ok" type="button">8</button>
          <button class="btn btn-outline" type="button">error</button>
        </div>
        <div class="answer">
          åœ¨ ES2018 ä¸­ä¿®è®¢äº†
          <code>String.raw</code> çš„è¡Œä¸ºï¼Œéæ³•çš„è½¬ä¹‰åºåˆ—ä¸å†æŠ›å‡ºå¼‚å¸¸
        </div>
      </li>

      <li>
        <h2>ä»¥ä¸‹ä»£ç çš„æ‰§è¡Œç»“æœï¼Ÿ</h2>
        <pre>function tag(str) {
  return str[0].toUpperCase();
}

tag`justjavac`;</pre>
        <div class="btn-group">
          <button class="btn btn-outline" type="button">Justjavac</button>
          <button class="btn btn-outline ok" type="button">JUSTJAVAC</button>
          <button class="btn btn-outline" type="button">justjavac</button>
          <button class="btn btn-outline" type="button">error</button>
        </div>
        <div class="answer">
          è¿™ä¸ªæ˜¯ ES6 çš„çŸ¥è¯†ç‚¹ï¼šæ ‡ç­¾å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°åŒ…å«ä¸€ä¸ªå­—ç¬¦ä¸²å€¼çš„æ•°ç»„ã€‚å…¶ä½™çš„å‚æ•°ä¸è¡¨è¾¾å¼ç›¸å…³ã€‚
        </div>
      </li>

      <li>
        <h2>ä»¥ä¸‹ä»£ç çš„æ‰§è¡Œç»“æœï¼Ÿ</h2>
        <pre>function tag(str) {
  return str[0];
}

tag`\unicode`;</pre>
        <div class="btn-group">
          <button class="btn btn-outline" type="button">\unicode</button>
          <button class="btn btn-outline" type="button">error</button>
          <button class="btn btn-outline ok" type="button">undefined</button>
          <button class="btn btn-outline" type="button">\</button>
        </div>
        <div class="answer">
          ECMAScript 2018 ç§»é™¤äº†å¸¦æ ‡ç­¾çš„æ¨¡ç‰ˆå­—ç¬¦ä¸²ä¸­è½¬ä¹‰åºåˆ—çš„è¯­æ³•é™åˆ¶ã€‚å¯¹äºéæ³•çš„è½¬ä¹‰åºåˆ—(Unicodeã€äºŒå…­è¿›åˆ¶ã€å…«è¿›åˆ¶)è¿”å›
          <code>undefined</code>
        </div>
      </li>

      <li>
        <h2>ä»¥ä¸‹ä»£ç çš„æ‰§è¡Œç»“æœï¼Ÿ</h2>
        <pre>let regex = /^.$/;

regex.test('é“');
regex.test('ğŸ˜€');
</pre>
        <div class="btn-group">
          <button class="btn btn-outline" type="button">false false</button>
          <button class="btn btn-outline" type="button">false true</button>
          <button class="btn btn-outline" type="button">true true</button>
          <button class="btn btn-outline ok" type="button">true false</button>
        </div>
        <div class="answer">
          è¿™ä¸ªä¸æ˜¯ ES2018 çŸ¥è¯†ç‚¹ï¼Œæ˜¯ ES2015 çš„ã€‚å¯¹äº Unicodeï¼ŒES5 ä¸­æä¾›äº†
          <code>charCodeAt()</code> æ–¹æ³•æ¥è¿”å›æŒ‡å®šç´¢å¼•å¤„å­—ç¬¦çš„ Unicode æ•°å€¼ï¼Œä½†æ˜¯ Unicode ç¼–ç å•å…ƒ > 0x10000 çš„é™¤å¤–ï¼ŒES2015 ä¸­åˆå¢åŠ äº†ä¸€ä¸ªæ–°çš„æ–¹æ³•
          <code>codePointAt()</code> å¯ä»¥è¿”å›å¤§äº 0x10000 å­—ç¬¦ä¸²çš„æ•°å€¼ã€‚ JavaScript è™½ç„¶é»˜è®¤æ”¯æŒ Unicodeï¼Œä½†æ˜¯ JavaScript çš„ç¼–ç æ–¹å¼æ˜¯ UCS-2ï¼Œæ‰€æœ‰å­—ç¬¦éƒ½æ˜¯ 2 ä¸ªå­—èŠ‚ï¼Œå¦‚æœæ˜¯ 4 ä¸ªå­—èŠ‚çš„å­—ç¬¦ï¼Œä¼šå½“ä½œä¸¤ä¸ªåŒå­—èŠ‚çš„å­—ç¬¦å¤„ç†ã€‚åœ¨
          ES6 ä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼çš„
          <code>u</code> æ ‡è¯†å¯ç”¨å¯¹ Unicode ç‰¹æ®Šå­—ç¬¦çš„æ”¯æŒã€‚å› æ­¤æˆ‘ä»¬ä½¿ç”¨
          <code>let regex = /^.$/u</code> å¯ä»¥å¾—åˆ°æœŸæœ›çš„ç»“æœ
          <code>true true</code>ã€‚
        </div>
      </li>


      <li>
        <h2>ä»¥ä¸‹ä»£ç  true å’Œ false çš„ä¸ªæ•°ï¼Ÿ</h2>
        <pre>let regex = /./;

regex.test('\n');
regex.test('\r');
regex.test('\v');
regex.test('\f');
regex.test('\u{2028}');
regex.test('\u{2029}');
regex.test('\u{0085}');</pre>
        <div class="btn-group">
          <button class="btn btn-outline" type="button">0 7</button>
          <button class="btn btn-outline" type="button">7 0</button>
          <button class="btn btn-outline ok" type="button">3 4</button>
          <button class="btn btn-outline" type="button">4 3</button>
        </div>
        <div class="answer">
          åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­
          <code>.</code> å¯ä»¥åŒ¹é…æ¢è¡Œç¬¦ä»¥å¤–çš„ä»»æ„å­—ç¬¦ï¼Œæ¢è¡Œç¬¦åŒ…æ‹¬
          <code>\n</code>ã€
          <code>\r</code>ã€
          <code>\u{2028}</code>ã€
          <code>\u{2029}</code>ã€‚ è¿˜æœ‰ä¸€äº›å…¶å®ƒå­—ç¬¦ï¼Œè™½ç„¶ä¹Ÿå¯ä»¥ä½œä¸ºä¸€è¡Œçš„å¼€å§‹ï¼Œä½†æ˜¯
          <code>.</code> å¯ä»¥åŒ¹é…ï¼ŒåŒ…æ‹¬
          <code>\v</code>ã€
          <code>\f</code>ã€
          <code>\u{0085}</code>ã€‚ ES2018 ä¸ºæ­£åˆ™è¡¨è¾¾å¼å¢åŠ äº† s/dotAll æ ‡å¿—ï¼Œå¯ä»¥è®©
          <code>.</code> åŒ¹é…ä»»æ„å­—ç¬¦ï¼Œæ‰€ä»¥
          <code>let regex = /./s</code> å¯ä»¥ä½¿ä»¥ä¸Šä»£ç éƒ½è¿”å›
          <code>true</code>ã€‚
        </div>
      </li>
    </ol>

    <footer class="footer">
      Copyright es2018puzzlers.
      <br> æœ¬ç½‘ç«™è°œé¢˜ç­”æ¡ˆå¯åœ¨
      <a href="http://esnext.justjavac.com" target="_blank">esnext.justjavac.com</a> æ‰¾åˆ°ã€‚
    </footer>

  </div>
  <script src="assets/entry.js" async defer></script>
</body>

</html>